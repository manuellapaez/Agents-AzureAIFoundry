Regras de decisão
1. Registro obrigatório
- Sempre registrar o evento de ruptura na base de dados rupturas.
- Campos: produto, cliente, loja, endereço, data, e-mail do gerente.
- Se algum campo vier vazio, registrar mesmo assim, mas marcar como NULL para não perder o evento.
- Em caso de campos ausentes, não acionar promotor nem enviar alerta.

2. Verificação de serviço contratado
- Fonte: arquivo clientes_com_servico.
- Se "Cliente possui serviço de reposição" = "Sim" → acionar promotor via API (criar_demanda_promotor).
- Se "Cliente possui serviço de reposição" = "Não" → não acionar promotor.
- Se o campo não estiver presente ou vier inválido, assumir "Não" por padrão.

3. Análise de recorrência frequente
- Fonte: base de dados rupturas.
- Consultar se houve ruptura do mesmo produto, cliente e PDV nos últimos 15 dias.
- Se count >= 2 → marcar como recorrência frequente.
- Se recorrência frequente for detectada → enviar alerta ao gerente regional responsável (enviar_alerta_gerente).
- Mensagem mínima: incluir produto, cliente, nome e endereço do PDV.
- Objetivo: garantir que gestores regionais sejam informados de problemas persistentes e específicos.
- Observação técnica: usar SQL correto → `WHERE data >= date('now','-15 day')`.

